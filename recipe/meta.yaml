{% set name = "mpv" %}
{% set version = "0.39.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/mpv-player/mpv/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 2ca92437affb62c2b559b4419ea4785c70d023590500e8a52e95ea3ab4554683

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ stdlib("c") }}
    - {{ compiler('cxx') }}
    - meson
    - ninja
    - cmake
    - pkg-config
    - docutils
  host:
    - ffmpeg
    - libjpeg-turbo
    - libiconv
    - libdrm  # [linux]
    - libarchive
    - libass
    - lcms2
    - uchardet  # [linux]
    - vapoursynth
    - yt-dlp
    - xz
    - zlib
    - libplacebo
  run:
    - uchardet  # [linux]
    - vapoursynth
    - yt-dlp

test:
  commands:
    - mpv --help

about:
  home: https://mpv.io
  license: GPL-2.0-or-later
  license_file: LICENSE.GPL
  summary: 'Media player based on MPlayer and mplayer2'
  description: |
    MPV is a free, open-source, and cross-platform media player based on 
    MPlayer and mplayer2. It supports a wide variety of video file formats, 
    audio and video codecs, and subtitle types.

extra:
  recipe-maintainers:
    - Tobias-Fischer
